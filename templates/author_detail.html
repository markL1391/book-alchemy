{% extends "base.html" %}
{% block title %}{{ author.name }}{% endblock %}

{% block content %}
  <p><a href="{{ url_for('home') }}">← Back to Library</a></p>

  <div class="book" style="max-width: 800px; margin: 0 auto;">
    <h2 style="margin-top: 0;">{{ author.name }}</h2>

    <p style="color: #6f6f6f;">
      {% if author.birth_date %}<strong>Born:</strong> {{ author.birth_date }}{% endif %}
      {% if author.date_of_death %} · <strong>Died:</strong> {{ author.date_of_death }}{% endif %}
    </p>

    <h3>Books in your library</h3>

    {% if author.books|length == 0 %}
      <p>No books found for this author.</p>
    {% else %}
      <ul class="books" style="grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));">
        {% for book in author.books %}
          <li class="book">
            {% if book.isbn %}
              <img
                src="https://covers.openlibrary.org/b/isbn/{{ book.isbn }}-M.jpg?default=false"
                alt="Cover for {{ book.title }}"
                onerror="this.onerror=null; this.src='https://books.google.com/books/content?vid=ISBN{{ book.isbn }}&printsec=frontcover&img=1&zoom=1';"
              >
            {% endif %}

            <strong>
              <a href="{{ url_for('book_detail', book_id=book.id) }}">{{ book.title }}</a>
            </strong>
            {% if book.publication_year %}
              <br><small>{{ book.publication_year }}</small>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% endif %}
  </div>
{% endblock %}
